<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valuuttamuunnin</title>
    <script src="app.js" defer></script>
    <link rel="stylesheet" href="styles.css">
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
            const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
        });
    </script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>
<body background="https://wallpaperaccess.com/full/1453912.jpg" style="background-size: cover; background-repeat: no-repeat; background-attachment: fixed;">
    <!-- Vue appin juurielementti -->
    <div id="app">
        <!-- Containeri valuuttojen infonappeihin -->
        <div class="container border p-4 mt-5 mb-5 bg-light bg-opacity-80 rounded justify-content-center">
        <div class="btn-group" role="group" aria-label="Basic example" style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Flag_of_Europe.svg/330px-Flag_of_Europe.svg.png'); background-size: cover;" data-bs-toggle="popover" data-bs-title="Euroopan euro" data-bs-content="Euroa käytetään useissa Euroopan maissa, esimerkiksi Suomessa, Saksassa ja Ranskassa. Se on yhteisvaluutta useille Euroopan unionin jäsenmaille."><strong>EUR</strong></button>
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/a/a4/Flag_of_the_United_States.svg/1280px-Flag_of_the_United_States.svg.png'); background-size: cover;" data-bs-toggle="popover" data-bs-title="Yhdysvaltain dollari" data-bs-content="Yhdysvaltain dollaria käytetään Yhdysvalloissa. Se on maailman yleisin varantovaluutta."><strong>USD</strong></button>
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Flag_of_the_United_Kingdom_%283-5%29.svg/1024px-Flag_of_the_United_Kingdom_%283-5%29.svg.png'); background-size: cover;" data-bs-toggle="popover" data-bs-title="Britannian punta" data-bs-content="Britannian puntaa käytetään Isossa-Britanniassa. Se on yksi maailman vanhimmista valuutoista."><strong>GBP</strong></button>
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/en/thumb/9/9e/Flag_of_Japan.svg/1200px-Flag_of_Japan.svg.png'); background-size: cover;" data-bs-toggle="popover" data-bs-title="Japanin jeni" data-bs-content="Japanin jeniä käytetään Japanissa. Se on yksi Aasian tärkeimmistä valuutoista."><strong>JPY</strong></button>
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Flag_of_Australia.svg/1280px-Flag_of_Australia.svg.png'); background-size: cover" data-bs-toggle="popover" data-bs-title="Australian dollari" data-bs-content="Australian dollaria käytetään Australiassa. Se on yksi tärkeimmistä Tyynenmeren alueen valuutoista."><strong>AUD</strong></button>
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Flag_of_Canada_%28Pantone%29.svg/330px-Flag_of_Canada_%28Pantone%29.svg.png'); background-size: cover;" data-bs-toggle="popover" data-bs-title="Kanadan dollari" data-bs-content="Kanadan dollaria käytetään Kanadassa. Se on yksi Pohjois-Amerikan tärkeimmistä valuutoista."><strong>CAD</strong></button>
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Flag_of_Switzerland.svg/2048px-Flag_of_Switzerland.svg.png'); background-size: cover;" data-bs-toggle="popover" data-bs-title="Sveitsin frangi" data-bs-content="Sveitsin frangi on Sveitsin valuutta. Se on tunnettu vakaudestaan ja turvallisuudestaan."><strong>CHF</strong></button>
            <button type="button" class="btn btn-lg btn-dark" style="text-shadow: 1px 1px 6px black; background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Flag_of_Sweden.svg/2560px-Flag_of_Sweden.svg.png'); background-size: cover;" data-bs-toggle="popover" data-bs-title="Ruotsin kruunu" data-bs-content="Ruotsin kruunu on Ruotsin valuutta. Se on yksi Pohjoismaiden tärkeimmistä valuutoista."><strong>SEK</strong></button>
        </div>
        <!-- Valuuttamuunnin-->
        <div class="container text-center mt-5">
        <h1 class="mb-4 mt-5">Valuuttamuunnin</h1>
        </div>
        <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-5">
                <div class="mb-3">
                <label for="currencySelect" class="form-label">Valitse lähtövaluutta:</label>
                <!-- Vuen avulla asetetaan valittu valuutta fromCurrency muuttujaan ja kutsutaan convertCurrency-metodia, kun valinta muuttuu -->
                <select id="currencySelect" class="form-select" v-model="fromCurrency" @change="convertCurrency">
                    <!-- Vuen avulla loopataan valuutat -->
                    <option v-for="currency in currencies" :key="currency" :value="currency">
                        {{ currency }}
                    </option>
                </select>
            </div>
            <div class="mb-3">
                <label for="amountInput" class="form-label">Paljonko sinulla on valuuttaa {{ fromCurrency }}:</label>
                <!-- Vuen avulla asetetaan syötetty määrä amount muuttujaan ja kutsutaan convertCurrency-metodia, kun syöte muuttuu -->
                <input type="number" id="amountInput" class="form-control" v-model.number="amount" @input="convertCurrency" @change="convertCurrency" @keydown.enter="convertCurrency">
            </div>
            </div>
            <div class="col-md-1 d-flex align-items-center justify-content-center">
                <button class="btn btn-warning mb-2" @click="switchCurrencies"><i class="bi bi-arrow-left-right"></i></button>
            </div>
            <div class="col-md-5">
            <div class="mb-3">
                <label for="targetCurrencySelect" class="form-label">Valitse kohdevaluutta:</label>
                <!-- Vuen avulla asetetaan valittu valuutta toCurrency muuttujaan ja kutsutaan convertCurrency-metodia, kun valinta muuttuu -->
                <select id="targetCurrencySelect" class="form-select" v-model="toCurrency" @change="convertCurrency">
                    <!-- Vuen avulla loopataan valuutat -->
                    <option v-for="currency in currencies" :key="currency" :value="currency">
                        {{ currency }}
                    </option>
                </select>
            </div>
            <div class="mb-3">
                <!-- Vuen avulla näytetään muunnettu määrä -->
                <label for="convertedAmount" class="form-label">Muunnettu määrä valuuttana {{ toCurrency }}:</label>
                <input type="number" id="convertedAmount" class="form-control" :value="result" readonly>
            </div>
            </div>
        </div>
        </div>
        <!-- Muunna-painike, joka häviää kun valuuttakurssi on haettu -->
        <div class="container mt-5 text-center" v-if="!exchangeRate">
            <button class="btn btn-primary mb-4" @click="convertCurrency"><i class="bi bi-arrow-repeat"></i> Muunna</button>
        </div>
        <!-- Esimerkkituotteet ja vaihtokurssi, jotka näkyvät kun valuuttakurssi on haettu -->
        <div class="container mt-5" v-if="exchangeRate">
            <div class="row justify-content-center">
                <h2 class="mb-4">Esimerkkejä suomalaisista tuotteista:</h2>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <img src="https://public.keskofiles.com/f/k-ruoka/product/6411401015090" class="card-img-top mb-3" alt="Fazerin Sininen" style="height: 200px; object-fit: contain;">
                            <h5 class="card-title">Fazerin Sininen</h5>
                            <!-- Näytetään Fazerin Sinisen hinta valituissa valuutoissa kertomalla eurolliset hinnat euron kursseilla -->
                            <p class="card-text">{{ (fazerinSininen * fromRateEUR).toFixed(2) }} {{ fromCurrency }} =  {{ (fazerinSininen * exchangeRateEUR).toFixed(2) }} {{ toCurrency }}</p>

                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <img src="https://pricespy-75b8.kxcdn.com/product/standard/280/3043182.jpg" class="card-img-top mb-3" alt="Juhla Mokka" style="height: 200px; object-fit: contain;">
                            <h5 class="card-title">Juhla Mokka</h5>
                            <!-- Näytetään Juhla Mokan hinta valituissa valuutoissa kertomalla eurolliset hinnat euron kursseilla -->
                            <p class="card-text">{{ (juhlaMokka * fromRateEUR).toFixed(2) }} {{ fromCurrency }} =  {{ (juhlaMokka * exchangeRateEUR).toFixed(2) }} {{ toCurrency }}</p>

                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <img src="https://cdn.s-cloud.fi/v1/w360h360@_q75/assets/dam-id/Ca1Awjx_agV9Kqzg0ts9Uq.webp" class="card-img-top mb-3" alt="Sandels olut" style="height: 200px; object-fit: contain;">
                            <h5 class="card-title">Sandels 0,33l 4,7% 24-pack</h5>
                            <!-- Näytetään Sandelsin hinta valituissa valuutoissa kertomalla eurolliset hinnat euron kursseilla -->
                            <p class="card-text">{{ (sandels * fromRateEUR).toFixed(2) }} {{ fromCurrency }} =  {{ (sandels * exchangeRateEUR).toFixed(2) }} {{ toCurrency }}</p>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container mt-5" v-if="exchangeRate">
            <div class="row justify-content-center text-center mt-5">
                <!-- Näytetään vaihtokurssi -->
                <h2 class="mb-4">Vaihtokurssi: 1 {{ fromCurrency }} = {{ exchangeRate }} {{ toCurrency }}</h2>
                
            </div>

            
        </div>
        </div>

    </div>
</body>
</html>